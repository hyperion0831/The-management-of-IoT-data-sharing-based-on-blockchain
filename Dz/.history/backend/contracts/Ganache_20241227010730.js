const fs = require('fs');
const XLSX = require('xlsx');
const Web3 = require('web3');

// 连接到 Ganache 或其他节点
const web3 = new Web3(new Web3.providers.HttpProvider('http://127.0.0.1:7545'));
const contract = new web3.eth.Contract(contractABI, contractAddress);

//ganache账户，1测试，2实盘
var accounts_1 = "0xaE5E0ae67250aE6b078C5345000B6D3b2d0b0762";
var accounts_2 = "0x0f2340ce74265F9d9512c938547F3C1A64242C8a";

//web3部署合约
var healthdatacontractContract = new web3.eth.Contract([{"inputs":[],"name":"jsonData1","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"jsonData2","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"retrieveJsonData1","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"retrieveJsonData2","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_data","type":"string"}],"name":"storeJsonData1","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_data","type":"string"}],"name":"storeJsonData2","outputs":[],"stateMutability":"nonpayable","type":"function"}]);
var healthdatacontract = healthdatacontractContract.deploy({
     data: '0x6080604052348015600e575f80fd5b5061088b8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610060575f3560e01c80633856fd701461006457806369e591f714610080578063ab61d4f41461009e578063ae35e645146100bc578063b66b203b146100d8578063d964df34146100f6575b5f80fd5b61007e600480360381019061007991906104bc565b610114565b005b610088610127565b6040516100959190610563565b60405180910390f35b6100a66101b2565b6040516100b39190610563565b60405180910390f35b6100d660048036038101906100d191906104bc565b610242565b005b6100e0610254565b6040516100ed9190610563565b60405180910390f35b6100fe6102e0565b60405161010b9190610563565b60405180910390f35b80600190816101239190610786565b5050565b5f8054610133906105b0565b80601f016020809104026020016040519081016040528092919081815260200182805461015f906105b0565b80156101aa5780601f10610181576101008083540402835291602001916101aa565b820191905f5260205f20905b81548152906001019060200180831161018d57829003601f168201915b505050505081565b6060600180546101c1906105b0565b80601f01602080910402602001604051908101604052809291908181526020018280546101ed906105b0565b80156102385780601f1061020f57610100808354040283529160200191610238565b820191905f5260205f20905b81548152906001019060200180831161021b57829003601f168201915b5050505050905090565b805f90816102509190610786565b5050565b60018054610261906105b0565b80601f016020809104026020016040519081016040528092919081815260200182805461028d906105b0565b80156102d85780601f106102af576101008083540402835291602001916102d8565b820191905f5260205f20905b8154815290600101906020018083116102bb57829003601f168201915b505050505081565b60605f80546102ee906105b0565b80601f016020809104026020016040519081016040528092919081815260200182805461031a906105b0565b80156103655780601f1061033c57610100808354040283529160200191610365565b820191905f5260205f20905b81548152906001019060200180831161034857829003601f168201915b5050505050905090565b5f604051905090565b5f80fd5b5f80fd5b5f80fd5b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6103ce82610388565b810181811067ffffffffffffffff821117156103ed576103ec610398565b5b80604052505050565b5f6103ff61036f565b905061040b82826103c5565b919050565b5f67ffffffffffffffff82111561042a57610429610398565b5b61043382610388565b9050602081019050919050565b828183375f83830152505050565b5f61046061045b84610410565b6103f6565b90508281526020810184848401111561047c5761047b610384565b5b610487848285610440565b509392505050565b5f82601f8301126104a3576104a2610380565b5b81356104b384826020860161044e565b91505092915050565b5f602082840312156104d1576104d0610378565b5b5f82013567ffffffffffffffff8111156104ee576104ed61037c565b5b6104fa8482850161048f565b91505092915050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f61053582610503565b61053f818561050d565b935061054f81856020860161051d565b61055881610388565b840191505092915050565b5f6020820190508181035f83015261057b818461052b565b905092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f60028204905060018216806105c757607f821691505b6020821081036105da576105d9610583565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f6008830261063c7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82610601565b6106468683610601565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f61068a6106856106808461065e565b610667565b61065e565b9050919050565b5f819050919050565b6106a383610670565b6106b76106af82610691565b84845461060d565b825550505050565b5f90565b6106cb6106bf565b6106d681848461069a565b505050565b5b818110156106f9576106ee5f826106c3565b6001810190506106dc565b5050565b601f82111561073e5761070f816105e0565b610718846105f2565b81016020851015610727578190505b61073b610733856105f2565b8301826106db565b50505b505050565b5f82821c905092915050565b5f61075e5f1984600802610743565b1980831691505092915050565b5f610776838361074f565b9150826002028217905092915050565b61078f82610503565b67ffffffffffffffff8111156107a8576107a7610398565b5b6107b282546105b0565b6107bd8282856106fd565b5f60209050601f8311600181146107ee575f84156107dc578287015190505b6107e6858261076b565b86555061084d565b601f1984166107fc866105e0565b5f5b82811015610823578489015182556001820191506020850194506020810190506107fe565b86831015610840578489015161083c601f89168261074f565b8355505b6001600288020188555050505b50505050505056fea2646970667358221220b9adb64ba2e8f14bd61fa26a1b8db4e0504023dd4b97f48c3576a3bc156e122464736f6c634300081a0033', 
     arguments: [
     ]
}).send({
     from: accounts_1, 
     gas: '4700000'
   }, function (e, contract){
    console.log(e, contract);
    if (typeof contract.address !== 'undefined') {
         console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
    }
 })

 
